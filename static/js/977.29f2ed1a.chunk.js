"use strict";(self.webpackChunkmagazine=self.webpackChunkmagazine||[]).push([[977],{763:(e,r,s)=>{s.d(r,{A:()=>c});const t="Paginator_paginator__rKT2Y",n="Paginator_pages__YUbRT",a="Paginator_activePage__V0D1Z";var i=s(579);const o=e=>{let{currentPage:r,totalItemsCount:s,pageSize:o,setCurrentPage:c}=e;const l=Math.ceil(s/o);let m=[];for(let t=1;t<=l;t++)m.push(t);const d=e=>c(+e.target.innerHTML),p=m.map((e=>(0,i.jsx)("span",{onClick:d,className:e===r?a:"",children:e},e)));return(0,i.jsx)("div",{className:"container",children:o>0&&s>0&&(0,i.jsxs)("div",{className:t,children:[(0,i.jsx)("button",{onClick:()=>r>1&&c(r-1),children:"<"}),(0,i.jsx)("div",{className:n,children:p}),(0,i.jsx)("button",{onClick:()=>r<l&&c(r+1),children:">"})]})})},c=e=>r=>{let{totalItemsCount:s,currentPage:t,pageSize:n,setCurrentPage:a,...c}=r;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e,{...c,currentPage:t,pageSize:n}),(0,i.jsx)(o,{totalItemsCount:s,currentPage:t,pageSize:n,setCurrentPage:a})]})}},982:(e,r,s)=>{s.d(r,{TM:()=>a,pd:()=>i,zp:()=>o});s(5043);var t=s(5274),n=s(579);const a=e=>{let{input:r,meta:s,...a}=e;const i=s.error&&s.touched;return(0,n.jsxs)("div",{className:t.A.formControl+" "+(i?t.A.error:""),children:[(0,n.jsx)("textarea",{...r,...a}),i&&(0,n.jsx)("span",{children:"\u041e\u0448\u0438\u0431\u043a\u0430"})]})},i=e=>{let{input:r,meta:s,...a}=e;const i=s.error&&s.touched;return(0,n.jsxs)("div",{className:t.A.formControl+" "+(i?t.A.error:""),children:[(0,n.jsx)("input",{type:a.type,className:t.A.input,...r,...a}),i&&(0,n.jsx)("p",{className:t.A.errorMessage,children:s.error})]})},o=e=>{let{input:r,meta:s,...a}=e;const i=s.error&&s.touched;return(0,n.jsx)("div",{className:t.A.formControl+" "+(i?t.A.error:""),children:(0,n.jsx)("input",{type:a.type,onChange:e=>r.onChange(e.target.files[0]),className:t.A.input,...a})})}},5274:(e,r,s)=>{s.d(r,{A:()=>t});const t={formControl:"FormControls_formControl__neQaL",error:"FormControls_error__7Upak",formSummaryError:"FormControls_formSummaryError__llVHA",input:"FormControls_input__8UP1w",errorMessage:"FormControls_errorMessage__prxIH"}},9977:(e,r,s)=>{s.r(r),s.d(r,{default:()=>J});var t=s(7222),n=s(1184),a=s(5043),i=s(3923),o=s(3003),c=s(8357);const l="Review_review__+dqr8",m="Review_left__k7TRp",d="Review_information__MRDxC",p="Review_comment__gfhJp";var u=s(7696),g=s(9589),_=s(9767),v=s(579);const h=e=>{let{img:r,fullname:s,grade:t,comment:n}=e,a=(0,_.A)(t);const i=(0,c.A)(r,u,g.g);return(0,v.jsxs)("article",{className:l,children:[(0,v.jsxs)("div",{className:m,children:[(0,v.jsx)("img",{src:i,alt:""}),(0,v.jsx)("span",{children:s})]}),(0,v.jsxs)("div",{className:d,children:[(0,v.jsx)("p",{className:p,children:n}),(0,v.jsx)("div",{children:a})]})]})};var x=s(3386);const j="Reviews_items__CUP41",w=(0,i.Zz)((0,o.Ng)((e=>({isFetching:e.reviews.isFetching}))),x.A)((e=>{let{reviews:r}=e;const s=r.map((e=>(0,a.createElement)(h,{...e,key:e.id})));return(0,v.jsxs)("section",{className:"container",children:[(0,v.jsx)("h2",{children:"\u041e\u0442\u0437\u044b\u0432\u044b"}),(0,v.jsx)("div",{className:j,children:s})]})}));var N=s(763),C=s(2092),R=s(5479);const A=(e,r)=>async s=>{s((0,C.DO)(!0));let t=await R.Gr.getReviews(e,r);s((0,C.DO)(!1)),s((0,C.UF)(t))},f=e=>e.reviews.totalReviewsCount,P=e=>e.reviews.pageSize,F=e=>e.reviews.currentPage,S=e=>e.reviews.reviews;class z extends a.Component{componentDidMount(){this.props.getReviews(this.props.currentPage,this.props.pageSize)}componentDidUpdate(e){e.currentPage!==this.props.currentPage&&this.props.getReviews(this.props.currentPage,this.props.pageSize)}render(){return(0,v.jsx)(w,{reviews:this.props.reviews})}}const b=(0,i.Zz)((0,o.Ng)((e=>({reviews:S(e),currentPage:F(e),pageSize:P(e),totalItemsCount:f(e)})),{getReviews:A,setCurrentPage:C.Tm}),N.A)(z);var y=s(2521);const k="NewReview_items__cerpl";var M=s(7017),T=s(5963),D=s(3842),I=s(6730);const U="NewReviewForm_form__jxWq3",E="NewReviewForm_img__ecWsF",G="NewReviewForm_left__a8wgO",O="NewReviewForm_mainItems__qAEfB",Z="NewReviewForm_text__4c4GX",q="NewReviewForm_information__tF+dQ",H="NewReviewForm_stars__pdlVN",V="NewReviewForm_title__5rjFW",W="NewReviewForm_button__+gaPG";var X=s(982);const B=(0,D.A)({form:"comment"})((e=>{let{photo:r,fullname:s,handleSubmit:t,onSubmit:n}=e,[i,o]=(0,a.useState)(1);const c=e=>{const r=e.target.closest("span");o(+r.getAttribute("value"))},l=[];for(let a=1;a<=5;a++){let e=i>=a;l.push((0,v.jsx)("span",{value:a,onPointerOver:c,children:(0,v.jsx)(I.A,{isFill:e})},a))}return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h3",{className:V,children:"\u0411\u0443\u0434\u0435\u043c \u0431\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u043d\u044b, \u0435\u0441\u043b\u0438 \u0432\u044b \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u0435 \u043e\u0442\u0437\u044b\u0432"}),(0,v.jsxs)("form",{action:"",className:U,onSubmit:t((e=>{n({...e,grade:i})})),children:[(0,v.jsxs)("div",{className:O,children:[(0,v.jsxs)("div",{className:G,children:[(0,v.jsx)("img",{src:r,className:E,alt:""}),(0,v.jsx)("span",{children:s})]}),(0,v.jsxs)("div",{className:q,children:[(0,v.jsx)(T.A,{id:"comment",name:"comment",component:X.TM,className:Z}),(0,v.jsx)("div",{className:H,children:l})]})]}),(0,v.jsx)("button",{className:W,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432"})]})]})})),L=e=>{let{addReview:r,isAuth:s,getReviews:t,currentPage:n,pageSize:a,...i}=e;const o=(0,c.A)(i.img,M.Xj,g.g),l=s&&(0,y.A)(i.surname,i.name,i.patronymic);return(0,v.jsx)("section",{className:"container",children:(0,v.jsx)("div",{className:k,children:s?(0,v.jsx)(B,{fullname:l,photo:o,onSubmit:async e=>{let{comment:s,grade:o}=e;await r(i.id,s,o),t(n,a)}}):(0,v.jsx)("h3",{children:"\u0414\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})})};var Q=s(1128);const Y=(0,o.Ng)((e=>({currentPage:F(e),pageSize:P(e),isAuth:(0,Q.jb)(e),id:(0,Q.OX)(e),surname:(0,Q.EZ)(e),name:(0,Q.mG)(e),patronymic:(0,Q.Bw)(e),img:(0,Q._9)(e)})),{addReview:(e,r,s)=>async t=>{await R.Gr.addReview(e,r,s)},getReviews:A})(L),J=()=>(0,v.jsxs)("div",{children:[(0,v.jsx)(t.A,{}),(0,v.jsx)(b,{}),(0,v.jsx)(Y,{}),(0,v.jsx)(n.A,{})]})}}]);
//# sourceMappingURL=977.29f2ed1a.chunk.js.map